/* ===================== styles.css =====================
   - Glass header + เวลา + now playing
   - แท็บแบบ “Badge กลมโปร่ง” (tab-icon สวย/เท่ากันทุกหมวด)
   - กริดช่องขนาดเท่ากันทุกอุปกรณ์ + เอฟเฟกต์สลับหมวด
   - หมวด “หนัง” ใช้โลโก้แนวนอนยาว
   - ป้าย Histats มุมขวาบนเฮดเดอร์
======================================================== */

/* ---------- Root tokens ---------- */
:root{
  --bg:#0c0c0d; --panel:#141516; --panel-2:#101112; --text:#f2f2f2;
  --muted:#a0a7b0; --border:#242628; --maxw:1200px;

  /* การ์ดช่อง */
  --tile-w:104px;              /* ความกว้างการ์ดคงที่ */
  --tile-h:120px;              /* ความสูงการ์ดคงที่ */
  --tile-g:12px;               /* ระยะห่างการ์ด */
  --logo-max-h:52px;           /* ความสูงโลโก้มาตรฐาน */
  --logo-max-w:82px;           /* ความกว้างโลโก้มาตรฐาน */
  --logo-wide-h:42px;          /* ความสูงโลโก้แบบแนวนอนยาว */

  /* Tabs */
  --tab-gap:6px;
  --tabBadge:24px;
}

/* ---------- Reset ---------- */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--text);
  font-family:system-ui,-apple-system,'Sarabun','Inter',Segoe UI,Roboto,Arial,sans-serif;
}
img{max-width:100%;display:block}
button{font:inherit;background:none;border:0;color:inherit}
a{color:inherit;text-decoration:none}

/* ---------- Layout ---------- */
.container{ width:min(100%,var(--maxw)); margin:0 auto; padding:14px }
.app{ width:min(100%,var(--maxw)); margin:0 auto; padding:12px 14px 40px }

/* ---------- Header ---------- */
header{
  position:sticky; top:0; z-index:20;
  border-bottom:1px solid var(--border);
  background:linear-gradient(180deg,rgba(0,0,0,.45),rgba(0,0,0,0));
  backdrop-filter: blur(6px);
}
.h-wrap{
  position:relative; width:min(100%,var(--maxw)); margin:auto;
  padding:10px 14px; display:grid; justify-items:center; gap:4px;
}
.clock{font-weight:700;font-size:clamp(15px,2.3vw,19px);letter-spacing:.2px;text-align:center}
.now-playing{
  margin-top:2px;font-size:clamp(13px,2vw,16px);font-weight:600;opacity:.92;
  text-align:center;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;
}
.now-playing.swap{animation:npFade .24s ease both}
@keyframes npFade{from{opacity:0;transform:translateY(4px)}to{opacity:.92;transform:none}}

/* Histats badge (ขวาบน) */
#histats_counter{
  position:absolute; top:4px; right:4px; z-index:30; line-height:0;
  transform:scale(.82); transform-origin:top right;
}
#histats_counter #histatsC{ position:static !important }
#histats_counter img{ opacity:.9; filter:drop-shadow(0 1px 2px rgba(0,0,0,.45)) }
@media (max-width:640px){ #histats_counter{ transform:scale(.72) } }
@media (max-width:480px){ #histats_counter{ transform:scale(.64) } }
@media (max-width:390px){ #histats_counter{ transform:scale(.58) } }

/* ---------- Player ---------- */
#player{
  width:100%; aspect-ratio:16/9; background:#000; border-radius:16px; overflow:hidden;
  border:1px solid var(--border); box-shadow:0 8px 18px rgba(0,0,0,.25) inset;
}

/* ---------- Tabs ---------- */
.tabs{
  position:relative; display:flex; gap:12px; padding:14px 6px 16px; margin:12px auto 10px;
  overflow:auto; scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch;
  width:min(100%,var(--maxw));
}
.tabs::-webkit-scrollbar{height:6px}
.tabs::-webkit-scrollbar-thumb{background:#2b2d30;border-radius:8px}
.tabs.tabs--center{justify-content:center}
.tabs::before{
  content:""; position:absolute; inset:0; pointer-events:none; z-index:-1;
  background:
    radial-gradient(120% 80% at 10% 0%, rgba(99,102,241,.22) 0%, transparent 45%),
    radial-gradient(120% 80% at 90% 100%, rgba(168,85,247,.22) 0%, transparent 45%),
    linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,0));
  filter:blur(20px); opacity:.8;
}
.tab{position:relative; flex:0 0 auto; cursor:pointer; scroll-snap-align:center; -webkit-tap-highlight-color:transparent}
.tab-card{
  width:clamp(70px,11vw,88px); height:clamp(56px,9.8vw,70px);
  border-radius:10px; display:grid; grid-template-rows:auto auto; place-items:center;
  gap:var(--tab-gap);
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
  box-shadow:0 1px 0 rgba(255,255,255,.06) inset, 0 6px 14px rgba(0,0,0,.22);
  color:#fff; transform:translateZ(0) scale(1); transition:transform .16s ease;
}
.tab:hover .tab-card{transform:scale(1.015)}
.tab:active .tab-card{transform:scale(.985)}
.tab[aria-selected="true"] .tab-card{transform:scale(1.03)}
.tab-label{font-weight:700;font-size:10.8px;letter-spacing:.2px}

/* Badge กลมโปร่ง + ไอคอนเติมเต็ม */
.tab-icon{
  position:relative; width:var(--tabBadge); height:var(--tabBadge);
  display:grid; place-items:center; border-radius:12px;
  background:linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.06));
  border:1px solid rgba(255,255,255,.22);
  box-shadow:inset 0 1px 0 rgba(255,255,255,.55), 0 4px 12px rgba(0,0,0,.35);
}
.tab-icon svg{width:14px;height:14px;display:block}

/* ---------- Grid ---------- */
.grid{
  width:min(100%,var(--maxw)); margin:12px auto 0; display:grid;
  grid-template-columns:repeat(auto-fill,minmax(var(--tile-w),1fr));
  gap:var(--tile-g); justify-items:center;
  opacity:1; transform:none; filter:none;
}
.grid.switch-in .channel{
  opacity:0; transform:translateY(6px) scale(.98);
  filter:blur(4px);
  animation:tileIn .34s cubic-bezier(.2,.7,.2,1) forwards;
  animation-delay:calc(var(--stagger) * var(--i,0));
  will-change:transform,opacity,filter;
}
@keyframes tileIn{to{opacity:1;transform:none;filter:none}}
.grid.switch-out,.grid.switch-in{contain:paint}

/* ---------- Channel card ---------- */
.channel{position:relative;width:var(--tile-w);height:var(--tile-h);border-radius:14px;cursor:pointer;transform:translateZ(0)}
.channel::after{
  content:"";position:absolute;inset:-6px;border-radius:18px;
  background:radial-gradient(60% 60% at 50% 50%, rgba(255,255,255,.55) 0%, transparent 70%);
  filter:blur(12px);opacity:0;transition:opacity .25s ease;pointer-events:none;z-index:0;
}
.channel:hover::after,.channel.active::after{opacity:.9;animation:neonPulse 2.4s ease-in-out infinite}
@keyframes neonPulse{0%{filter:blur(9px);opacity:.5}50%{filter:blur(14px);opacity:.95}100%{filter:blur(9px);opacity:.5}}

.ch-card{
  position:relative; z-index:1; width:100%; height:100%;
  background:linear-gradient(180deg,var(--panel),var(--panel-2));
  border:1px solid var(--border); border-radius:12px;
  padding:9px 8px 8px; box-shadow:0 6px 16px rgba(0,0,0,.18);
  display:grid; grid-template-rows:1fr auto; gap:6px; place-items:center; overflow:hidden;
  transition:transform .12s ease, border-color .15s ease, box-shadow .15s ease;
}
.channel:hover .ch-card{
  transform:translateY(-1px);border-color:rgba(255,255,255,.7);
  box-shadow:0 0 0 1px rgba(255,255,255,.75) inset, 0 0 10px rgba(255,255,255,.42), 0 0 20px rgba(255,255,255,.22);
}
.channel:active .ch-card{transform:scale(.985)}

.logo-wrap{display:grid; place-items:center; width:100%; height:100%}
.logo{max-height:var(--logo-max-h); max-width:var(--logo-max-w); object-fit:contain; filter:drop-shadow(0 1px 1px rgba(0,0,0,.35))}
.channel[data-wide="true"] .logo{max-height:var(--logo-wide-h)}
.name{
  width:100%; text-align:center; font-weight:700; font-size:12px; letter-spacing:.2px;
  color:#eaeef3; opacity:.95; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}

/* Ripple */
.ripple{
  position:absolute; border-radius:50%; background:radial-gradient(circle at center, rgba(255,255,255,.55), rgba(255,255,255,0));
  transform:scale(0); animation:ripple .5s ease-out; pointer-events:none;
}
@keyframes ripple{to{transform:scale(1);opacity:0}}

/* ---------- Misc ---------- */
#mini-toast{ user-select:none }

/* ---------- Refresh button (พื้นฐาน) ---------- */
.refresh-btn{
  position:absolute; top:6px; left:6px; z-index:30;
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.18);
  color:var(--text); padding:6px 10px; border-radius:10px;
  font-weight:700; font-size:12px; display:flex; gap:8px; align-items:center;
  cursor:pointer; transition:transform .15s ease, border-color .15s ease, box-shadow .15s ease;
  backdrop-filter: blur(6px);
}
.refresh-btn .i{ font-size:14px; line-height:0 }
.refresh-btn:hover{ transform:translateY(-1px); border-color:rgba(255,255,255,.5) }
.refresh-btn:active{ transform:scale(.985) }
.refresh-btn[disabled]{ opacity:.65; cursor:wait }
@media (max-width:520px){
  .refresh-btn{ top:6px; left:6px; padding:5px 9px; font-size:11px }
}

/* ================= OVERRIDES: Balance header (Refresh ⟷ Clock ⟷ Histats) ================= */
:root{
  --hud-size: 34px;      /* ความสูงปุ่ม/ไอคอนใน header */
  --hud-gap: 10px;       /* ช่องว่างรอบๆ */
  --hud-radius: 12px;    /* มุมโค้ง */
}

/* ให้ header กันพื้นที่ซ้าย/ขวาเผื่อปุ่มและเคาน์เตอร์ แล้วให้เวลาอยู่กลางจริงๆ */
.h-wrap{
  min-height: calc(var(--hud-size) + 12px);
  padding-left:  calc(var(--hud-size) + 16px); /* เว้นที่ให้ปุ่มซ้าย */
  padding-right: calc(var(--hud-size) + 16px); /* เว้นที่ให้เคาน์เตอร์ขวา */
}

/* เวลา + now-playing อยู่กลางเสมอ */
.h-wrap .clock,
#clock{ text-align:center; }

/* ===== Refresh button (ซ้าย) ===== */
.refresh-btn{
  left:8px; top:50%; transform:translateY(-50%);
  height: var(--hud-size); line-height: var(--hud-size);
  display:inline-flex; align-items:center; gap:8px;
  padding: 0 12px; border-radius: var(--hud-radius);
  background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.18);
  color:var(--text,#fff); font-weight:700; font-size:12px;
  box-shadow:0 6px 14px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.35);
  backdrop-filter: blur(6px);
}
.refresh-btn:hover{ transform:translateY(-50%) translateY(-1px); border-color:rgba(255,255,255,.5) }
.refresh-btn:active{ transform:translateY(-50%) scale(.985) }

/* ===== Histats counter (ขวา) ===== */
#histats_counter{
  right:8px; top:50%; transform:translateY(-50%) scale(0.95);
  transform-origin: 100% 50%;
  height: var(--hud-size);
  display:grid; place-items:center;
}
#histats_counter img{ max-height: var(--hud-size) !important; height: var(--hud-size) !important; width:auto !important; }

/* ===== Responsive ===== */
@media (max-width: 640px){
  :root{ --hud-size: 30px; }
  .refresh-btn{ padding:0 10px; font-size:11px; }
  .h-wrap{
    padding-left:  calc(var(--hud-size) + 14px);
    padding-right: calc(var(--hud-size) + 14px);
  }
  #histats_counter{ transform:translateY(-50%) scale(0.82); }
}

/* มือถือเล็กมาก เหลือแต่ไอคอนเพื่อไม่ชนเวลา */
@media (max-width: 420px){
  .refresh-btn .t{ display:none; }
  .refresh-btn{ padding:0 8px; }
}

@media (min-width: 1280px){
  #histats_counter{ transform:translateY(-50%) scale(1); }
}
