<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TV Online Player (Debug Mode)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Sarabun:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://ssl.p.jwpcdn.com/player/v/8.26.0/jwplayer.js"></script>
    <script>
        jwplayer.key = 'XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo';
    </script>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #121212;
            color: #E0E0E0;
            font-family: 'Sarabun', 'Poppins', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            width: 100%;
            max-width: 1200px;
            padding: 20px;
            box-sizing: border-box;
        }
        header {
            width: 100%;
            text-align: center;
            padding: 20px 0;
            margin-bottom: 20px;
        }
        header h1 {
            margin: 0;
            font-size: 2.5em;
            color: #FFFFFF;
        }
        #player {
            width: 100%;
            aspect-ratio: 16/9;
            margin-bottom: 30px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
            background-color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.2em;
        }
        #channel-section {
            width: 100%;
            max-width: 1000px;
            margin: 10px auto;
        }
        #channel-section h2 {
            text-align: center;
            margin-bottom: 20px;
            color: #FFFFFF;
        }
        .category-container {
            margin-bottom: 30px;
        }
        .category-title {
            color: #1E90FF;
            font-size: 1.5em;
            font-weight: 700;
            padding-bottom: 10px;
            margin-bottom: 15px;
            border-bottom: 2px solid #333;
        }
        .channel-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: flex-start;
        }
        .channel {
            cursor: pointer;
            background: #1E1E1E;
            border: 2px solid #333;
            border-radius: 10px;
            text-align: center;
            padding: 10px;
            transition: transform 0.2s ease, border-color 0.2s ease;
            width: 90px;
        }
        .channel img {
            width: 70px;
            height: 70px;
            margin-bottom: 8px;
            border-radius: 5px;
            background-color: #2c2c2c;
            pointer-events: none;
        }
        .channel:hover {
            background: #282828;
            border-color: #1E90FF;
            transform: scale(1.05);
        }
    </style>
</head>
<body>

    <header>
        <h1>TV Online</h1>
    </header>

    <div class="container">
        <div id="player">
            <span>กรุณาเลือกช่องเพื่อรับชม</span>
        </div>

        <section id="channel-section">
            <h2>ช่องรายการ</h2>
            <div id="channel-list-container"></div>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log("DOM Loaded: Script starting...");

            const channels = [
                // --- หมวดหมู่: ทีวีดิจิทัล ---
                { category: "ทีวีดิจิทัล", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE/channelicon/ch5new.logo.png", file: "https://cri-streamer3.cdn.3bbtv.com:8443/3bb/live/5/5.mpd", keyId: "87db4361f7894655a4656e9c8b935a02", key: "b025a4b950df41158a87cfc8d6f2ac34" },
                { category: "ทีวีดิจิทัล", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE//channelicon/0001.png", file: "https://cri-streamer3.cdn.3bbtv.com:8443/3bb/live/2/2.mpd", keyId: "ca20a93cf8e3421dafbd5bdb1990081b", key: "86ae86a7391c481ea93eecdb740f0a14" },
                { category: "ทีวีดิจิทัล", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE/channelicon/0014.png", file: "https://cri-streamer3.cdn.3bbtv.com:8443/3bb/live/3/3.mpd", keyId: "4d4426a505f64382a9841155d721cee6", key: "0f4770219ccb4be5836a7517057e51c3" },
                { category: "ทีวีดิจิทัล", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE/channelicon/R2_0053.png", file: "https://cri-streamer3.cdn.3bbtv.com:8443/3bb/live/16/16.mpd", keyId: "9ebedc957e934d2b9023e4e60b97af73", key: "7bcb4363df74457bbafedec1a864e6b6" },
                { category: "ทีวีดิจิทัล", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE//channelicon/JKN18.png", file: "https://cri-streamer3.cdn.3bbtv.com:8443/3bb/live/18/18.mpd", keyId: "333de6034a1d45fe91c829539caf1149", key: "2710efc048ca44bba4c2b57397989a26" },
                { category: "ทีวีดิจิทัล", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE/channelicon//0015_R.png", file: "https://cri-streamer3.cdn.3bbtv.com:8443/3bb/live/23/23.mpd", keyId: "87db4361f7894655a4656e9c8b935a02", key: "b025a4b950df41158a87cfc8d6f2ac34" },
                { category: "ทีวีดิจิทัล", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE/channelicon/0054.png", file: "https://cri-streamer3.cdn.3bbtv.com:8443/3bb/live/24/24.mpd", keyId: "87db4361f7894655a4656e9c8b935a02", key: "b025a4b950df41158a87cfc8d6f2ac34" },
                { category: "ทีวีดิจิทัล", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE/channelicon//0006.png", file: "https://cri-streamer3.cdn.3bbtv.com:8443/3bb/live/27/27.mpd", keyId: "87db4361f7894655a4656e9c8b935a02", key: "b025a4b950df41158a87cfc8d6f2ac34" },
                { category: "ทีวีดิจิทัล", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE/channelicon/MCOT_new.png", file: "https://cri-streamer3.cdn.3bbtv.com:8443/3bb/live/30/30.mpd", keyId: "87db4361f7894655a4656e9c8b935a02", key: "b025a4b950df41158a87cfc8d6f2ac34" },
                { category: "ทีวีดิจิทัล", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE/channelicon/0012.png", file: "https://cri-streamer3.cdn.3bbtv.com:8443/3bb/live/31/31.mpd", keyId: "87db4361f7894655a4656e9c8b935a02", key: "b025a4b950df41158a87cfc8d6f2ac34" },
                { category: "ทีวีดิจิทัล", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE/channelicon/LOGO3HD.PNG", file: "https://cri-streamer3.cdn.3bbtv.com:8443/3bb/live/33/33.mpd", keyId: "9d76aea451d441a4913d4d70c4e586ab", key: "051027a6ff54494b949ba792928e9008" },
                { category: "ทีวีดิจิทัล", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE/channelicon/AmarinTV_NEW512.png", file: "https://cri-streamer3.cdn.3bbtv.com:8443/3bb/live/34/34.mpd", keyId: "4d4426a505f64382a9841155d721cee6", key: "0f4770219ccb4be5836a7517057e51c3" },
                { category: "ทีวีดิจิทัล", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE/channelicon/PPTV_2024e.jpg", file: "https://cri-streamer3.cdn.3bbtv.com:8443/3bb/live/36/36.mpd", keyId: "4d4426a505f64382a9841155d721cee6", key: "0f4770219ccb4be5836a7517057e51c3" },
                { category: "ข่าว", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE/channelicon/0019.png", file: "https://cri-streamer3.cdn.3bbtv.com:8443/3bb/live/25/25.mpd", keyId: "87db4361f7894655a4656e9c8b935a02", key: "b025a4b950df41158a87cfc8d6f2ac34" },
                { category: "ข่าว", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE/channelicon/0016.png", file: "https://cri-streamer3.cdn.3bbtv.com:8443/3bb/live/29/29.mpd", keyId: "87db4361f7894655a4656e9c8b935a02", key: "b025a4b950df41158a87cfc8d6f2ac34" },
                { category: "ภาพยนตร์และซีรีส์", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE///channelicon//3BBAsian_new.png", file: "https://cri-streamer3.cdn.3bbtv.com:8443/ais/play/101/101.mpd", keyId: "dac6cbd9d17a451bb76386f52469e0e9", key: "2e2ac52cadf843459915eaa1a9b95e48" },
                { category: "ภาพยนตร์และซีรีส์", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE///channelicon//Mono29Plus_new.png", file: "https://cri-streamer3.cdn.3bbtv.com:8443/ais/play/109/109.mpd", keyId: "072eeb02f6744f838fcc8f0ef36b312e", key: "b797c12f2dd64728aae23fd3c8ef275c" },
                { category: "ภาพยนตร์และซีรีส์", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE//channelicon/R_0148.png", file: "https://cri-streamer3.cdn.3bbtv.com:8443/ais/play/103/103.mpd", keyId: "9c5735afb4fd402580360aed8364469c", key: "128d55d9ac2b47ad85f86b5d08320179" },
                { category: "ภาพยนตร์และซีรีส์", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE/channelicon//0149.png", file: "https://cri-streamer3.cdn.3bbtv.com:8443/ais/play/104/104.mpd", keyId: "0db89bae851440a5994f5893ad480494", key: "d88ef77eaedf4451a65be2e0bf6eabde" },
                { category: "การ์ตูน", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE/channelicon//Cartoonito.png", file: "https://cri-streamer3.cdn.3bbtv.com:8443/ais/play/302/302.mpd", keyId: "ad2371259d34404cb89d54a4dc88dcd3", key: "1ba155e345c4456ba891cbee9b3e1c4c" },
                { category: "การ์ตูน", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE//channelicon/LOGO_Nickelodeon2.png", file: "https://cri-streamer3.cdn.3bbtv.com:8443/ais/play/303/303.mpd", keyId: "9130a6448a74430794d355b48b56a64c", key: "c2f4d3288cdb43cf81e519ceb414dd6f" },
                { category: "การ์ตูน", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE//channelicon/Nickjr_2024.png", file: "https://cri-streamer3.cdn.3bbtv.com:8443/ais/play/304/304.mpd", keyId: "641c3f0e676d49d18c2082e093380e69", key: "e06f3a2e327643249c3831ab199c4015" },
                { category: "กีฬา", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE/channelicon/T-SPorts_7_Final.png", file: "https://cri-streamer3.cdn.3bbtv.com:8443/3bb/live/7/7.mpd", keyId: "6187523f92b9475bb5b192f70cef1342", key: "5119311f482144d58dacabc5bc1fa4ba" },
                { category: "กีฬา", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE///channelicon//3BBsports1_new.png", file: "https://cri-streamer3.cdn.3bbtv.com:8443/ais/play/401/401.mpd", keyId: "678bbba596584ad895d2923fb0255e82", key: "c55471086c824112b217743a31abdf8f" },
                { category: "การศึกษา", logo: "https://ais-s.ais-vidnt.com/ais/play/origin/LIVE/channelicon/ALTV.PNG", file: "https://cri-streamer3.cdn.3bbtv.com:8443/3bb/live/4/4.mpd", keyId: "1e98456bcbea44b7ad05831387e364ef", key: "3d14fd4f9d3149a79b35a7124fccbd67" },
            ];
            console.log("Channels array is ready. Total channels:", channels.length);

            try {
                function loadPlayer(channel) {
                    console.log("Loading player for channel:", channel.logo);
                    const playerDiv = document.getElementById("player");
                    playerDiv.innerHTML = "";
                    jwplayer("player").setup({
                        file: channel.file,
                        type: "dash",
                        drm: {
                            clearkey: {
                                keyId: channel.keyId,
                                key: channel.key
                            }
                        },
                        width: "100%",
                        aspectratio: "16:9",
                        autostart: true,
                        mute: false
                    });
                }

                const channelListContainer = document.getElementById("channel-list-container");
                if (!channelListContainer) {
                    console.error("Error: channel-list-container not found!");
                    return;
                }
                console.log("Found channel-list-container element.");

                const groupedChannels = channels.reduce((acc, channel) => {
                    const category = channel.category;
                    if (!acc[category]) {
                        acc[category] = [];
                    }
                    acc[category].push(channel);
                    return acc;
                }, {});
                console.log("Channels grouped successfully.", groupedChannels);

                console.log("Starting to build channel list HTML...");
                for (const category in groupedChannels) {
                    console.log("Creating category:", category);
                    const categoryContainer = document.createElement("div");
                    categoryContainer.className = "category-container";

                    const categoryTitle = document.createElement("h3");
                    categoryTitle.className = "category-title";
                    categoryTitle.textContent = category;
                    categoryContainer.appendChild(categoryTitle);
                    
                    const channelGrid = document.createElement("div");
                    channelGrid.className = "channel-grid";

                    groupedChannels[category].forEach(channel => {
                        const div = document.createElement("div");
                        div.className = "channel";
                        div.innerHTML = `<img src="${channel.logo}" alt="Logo ${category}">`;
                        div.onclick = () => loadPlayer(channel);
                        channelGrid.appendChild(div);
                    });

                    categoryContainer.appendChild(channelGrid);
                    channelListContainer.appendChild(categoryContainer);
                }
                console.log("Finished building channel list HTML.");

            } catch (error) {
                console.error("A critical error occurred:", error);
            }
        });
    </script>
</body>
</html>
